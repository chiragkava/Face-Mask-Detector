<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,300,400,500,700,900" rel="stylesheet">

    <title>Face-Mask-Detection</title>

    <!-- CSS Files -->
    <link rel="icon" type="image/png" href="../static/assets/images/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="../static/assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="../static/assets/css/font-awesome.css">

    <link rel="stylesheet" href="../static/assets/css/templatemo-softy-pinko.css">
    <link rel="stylesheet" href="../static/assets/css/main.css">

    </head>
    
    <body>
    
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>  

    <div class="centro">
        <div class="container">
            <div class="row">
                <div class="offset-xl-3 col-xl-6 offset-lg-2 col-lg-8 col-md-12 col-sm-12" style="margin-top: 60px;">
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        <ul class=flashes>
                        {% for message in messages %}
                        <div class="alert alert-danger" role="alert">
                        {{message}}
                        </div>
                        {% endfor %}
                        </ul>
                    {% endif %}
                    {% endwith %}
                <h1 style="color: white;">Face mask Detection</h1>
                <p style="font-size: 20px;color: white;">Built using Pytorch & Flask</p>
                <form class="form-signin" method=post enctype=multipart/form-data action="/">
                    {% if filename %}
                        <div class="container-md">
                        <img id="display" class="img-fluid" style="height:400px;margin-top:19px;" src="{{url_for('display_image', filename=filename)}}">
                        </div>
                    {% endif %}
                    <img id="imagebox" class="img-fluid" style="margin-bottom:20px;" src="" alt="" height="400px">
                    
                    <div>
                        <div class="file-input">
                            <input type="file" name="file" id="file" class="file" onchange="readUrl(this)">
                            <label for="file" style="margin-left: auto;margin-right: auto;">Select file</label>
                        </div>
                    </div>
                    <br/>
                    <button class="btn btn-lg bg main-button-slider" style="width:280px;margin:auto" type="submit">Upload</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
     


    <section>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-sm-6 col-12" data-scroll-reveal="enter bottom move 50px over 0.6s after 0.2s">
                            <div class="features-small-item">
                                <img src="../static/sample/sample_1.jpg" class="img-round">
                                <h5 class="features-title">Try on Sample</h5>
                                <button onclick="window.location.href='{{url_for('try_it',name="sample_1.jpg")}}'" class="btn btn-block bg">Try Now</button>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-sm-6 col-12" data-scroll-reveal="enter bottom move 50px over 0.6s after 0.4s">
                             <div class="features-small-item">
                                <img src="../static/sample/sample_2.jpg" class="img-round">
                                <h5 class="features-title">Try on Sample</h5>
                                <button onclick="window.location.href='{{url_for('try_it',name="sample_2.jpg")}}'" class="btn btn-block bg">Try Now</button>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-sm-6 col-12" data-scroll-reveal="enter bottom move 50px over 0.6s after 0.6s">
                            <div class="features-small-item">
                                <img src="../static/sample/sample_3.jpg" class="img-round">
                                <h5 class="features-title">Try on Sample</h5>
                                <button onclick="window.location.href='{{url_for('try_it',name="sample_3.jpg")}}'" class="btn btn-block bg">Try Now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
   

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <ul class="social">
                        <li><a href="https://www.linkedin.com/in/chirag-kava-b99a5b186/" target="_blank" ><i class="fa fa-github"></i></a></li>
                        <li><a href="https://github.com/chiragkava" target="_blank" ><i class="fa fa-linkedin"></i></a></li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <p class="copyright">Copyright &copy; <strong>2021 Chirag Kava</strong></p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- jQuery -->
    <script src="../static/assets/js/jquery-2.1.0.min.js"></script>

    <!-- Bootstrap -->
    <script src="../static/assets/js/popper.js"></script>
    <script src="../static/assets/js/bootstrap.min.js"></script>

    <!-- Plugins -->
    <script src="../static/assets/js/scrollreveal.min.js"></script>
    <script src="../static/assets/js/waypoints.min.js"></script>
    <script src="../static/assets/js/jquery.counterup.min.js"></script>
    <script src="../static/assets/js/imgfix.min.js"></script> 
    
    <!-- Customs -->
    <script src="../static/assets/js/custom.js"></script>
    
    <script src="../static/assets/js/index.js"></script>

    <!-- Image plugins -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.1.0/exif.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-load-image/2.12.2/load-image.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-load-image/2.12.2/load-image-scale.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-load-image/2.12.2/load-image-orientation.min.js"></script>
    <script>
        
        document.getElementById("file").onchange = function (e) {
        var image = e.target.files[0];
        window.loadImage(image, function (img) {
            if (img.type === "error") {
                console.log("couldn't load image:", img);
            } else {
                window.EXIF.getData(image, function () {
                    console.log("load image done!");
                    var orientation = window.EXIF.getTag(this, "Orientation");
                    var canvas = window.loadImage.scale(img, {
                        orientation: orientation || 0,
                        canvas: true,
                        maxWidth: 500,
                        maxHeight:500
                    });
                    $("#display").attr("src", "");
                    $("#imagebox").attr("src",canvas.toDataURL());
                });
            }
        });
    };

    </script>

  </body>
</html>